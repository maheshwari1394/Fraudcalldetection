<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Audio to Text</title>
</head>
<body>
  <h2>voice text</h2>

  <button onclick="startStopRecognition()"> Start / Stop</button><br><br>

  <textarea id="textOutput" rows="10" cols="60" placeholder="Speech will appear here..."></textarea>

  <script>
    let recognition;
    let isListening = false;

    function startStopRecognition() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("Web Speech API not supported in this browser. Try Google Chrome.");
        return;
      }

      if (!recognition) {
        recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = "en-US";

        recognition.onresult = function(event) {
          let transcript = '';
          for (let i = event.resultIndex; i < event.results.length; ++i) {
            transcript += event.results[i][0].transcript;
          }
          document.getElementById('textOutput').value = transcript;
        };

        recognition.onerror = function(event) {
          console.error("Speech recognition error:", event.error);
        };
      }

      if (isListening) {
        recognition.stop();
        isListening = false;
      } else {
        recognition.start();
        isListening = true;
      }
    }
  </script>
</body>
</html>
